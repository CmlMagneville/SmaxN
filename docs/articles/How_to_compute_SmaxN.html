<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="SmaxN">
<title>How to compute the SmaxN metric? • SmaxN</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to compute the SmaxN metric?">
<meta property="og:description" content="SmaxN">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SmaxN</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/How_to_compute_SmaxN.html">How to compute the SmaxN metric?</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>How to compute the SmaxN metric?</h1>
                        <h4 data-toc-skip class="author">Camille
Magneville</h4>
            
            <h4 data-toc-skip class="date">2024-04-09</h4>
      
      
      <div class="d-none name"><code>How_to_compute_SmaxN.Rmd</code></div>
    </div>

    
    
<p>The goal of this vignette is to quickly explain the goals of the
<code>SmaxN</code> metric and how to simply compute it using the
<code>SmaxN</code> package.</p>
<p><br></p>
<div class="section level2">
<h2 id="what-is-the-smaxn-metric-about">What is the SmaxN metric about?<a class="anchor" aria-label="anchor" href="#what-is-the-smaxn-metric-about"></a>
</h2>
<p>The SmaxN is a metric which uses a network of synchronised cameras to
estimate<br>
species abundance using the distances between the cameras and species
maximal speed. It relies on the simple principle that <span style="color: lightseagreen;">a mobile individual can not be in two
places at the same time</span>.</p>
<p><br></p>
<p>The SmaxN framework needs only few conditions:</p>
<ul>
<li><p><span style="color: lightseagreen;">a network of temporally
synchronised cameras</span>: Surveys should be based on a set of at
least two fixed cameras which <strong>field of view do not
overlap</strong>. The temporal synchronisation should be realised at a
coherent precision according to the study design (at which precision
individuals are counted and what distance separate the cameras).
Basically, you just need to be able to link the frames from one camera
to the frames of the other cameras. The distances between each pair of
cameras must be known and you must build a <strong>distance data
frame</strong> with cameras in rows and columns.</p></li>
<li><p><span style="color: lightseagreen;">abundance through
time</span>: abundance of the studied species should be retrieved
through time. Thus for the studied species, there is a matrix with
recorded abundance for each time step (in rows) on each camera (in
columns) called the <strong>camera × time abundance data
frame</strong>.</p></li>
<li><p><span style="color: lightseagreen;">species maximal speed</span>:
the species maximal speed should be retrieved through experiments or
using data available. Yet to our knowledge, speed data is only available
for a small number of species <a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/j.0014-3820.2006.tb01849.x" class="external-link">Husak
et al. 2006</a> (collared lizard Crotaphytus collaris), <a href="https://zslpublications.onlinelibrary.wiley.com/doi/10.1111/j.1469-7998.1977.tb04188.x" class="external-link">Alexander
et al. 1977</a> (ten species of african ungulates), <a href="https://academic.oup.com/jmammal/article-abstract/35/1/103/847724?redirectedFrom=fulltext" class="external-link">Layne
and Benton 1954</a> (fourteen species of small mammals), <a href="https://pubmed.ncbi.nlm.nih.gov/29046579/" class="external-link">Hirt et al. 2017</a>
(474 terrestrial species), <a href="https://link.springer.com/article/10.1007/s00338-007-0195-0" class="external-link">Fulton
2007</a> (117 coral reef fish species belonging to 10 families). If data
is missing, we recommend to use <strong>conservative estimates</strong>
that is the maximum of maximal speed among species from the same clade
(e.g. family or order)</p></li>
</ul>
<p><br></p>
<p><strong>NB</strong>: The species maximal speed and the distances
between the cameras must be given using the same metric units
(<em>i.e.</em> if using meters for the distance, then use meters per
seconds (for instance) for the speed)</p>
<p><br></p>
<p>Using the minimal time it takes for an individual of the studied
species to go from one camera to another camera (using species maximal
speed and distance between the cameras), the <code>SmaxN</code>
algorithm find the best combination of abundances seen across time and
cameras to get the highest possible estimate of abundance.</p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="lets-compute-the-smaxn-other-abundance-estimates">Let’s compute the SmaxN &amp; other abundance estimates<a class="anchor" aria-label="anchor" href="#lets-compute-the-smaxn-other-abundance-estimates"></a>
</h2>
<p><br></p>
<p>We will here work with a simple example.</p>
<p>First, let’s build the distance data frame and the abundance
data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build distance dataframe for the example:</span></span>
<span><span class="va">dist_df_ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"A"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>, <span class="st">"B"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>                         <span class="st">"C"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"D"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dist_df_ex</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build distance dataframe for the example:</span></span>
<span><span class="va">abund_df_ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"A"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                          <span class="st">"B"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>, </span>
<span>                          <span class="st">"C"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, </span>
<span>                          <span class="st">"D"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dist_df_ex</span></span></code></pre></div>
<pre><code><span><span class="co">##   A B C D</span></span>
<span><span class="co">## A 0 2 5 5</span></span>
<span><span class="co">## B 2 0 5 5</span></span>
<span><span class="co">## C 5 5 0 4</span></span>
<span><span class="co">## D 5 5 4 0</span></span></code></pre>
<p>In the distance dataframe there are for instance 2m from camera A to
camera B, 5m from camera A to camera C and D <em>etc.</em></p>
<p><br></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abund_df_ex</span></span></code></pre></div>
<pre><code><span><span class="co">##    A B C D</span></span>
<span><span class="co">## 1  0 2 2 0</span></span>
<span><span class="co">## 2  1 2 0 1</span></span>
<span><span class="co">## 3  3 2 1 0</span></span>
<span><span class="co">## 4  7 2 0 1</span></span>
<span><span class="co">## 5  2 0 0 0</span></span>
<span><span class="co">## 6  2 0 4 6</span></span>
<span><span class="co">## 7  3 0 2 1</span></span>
<span><span class="co">## 8  0 0 2 1</span></span>
<span><span class="co">## 9  6 1 3 6</span></span>
<span><span class="co">## 10 2 2 0 4</span></span>
<span><span class="co">## 11 0 1 0 2</span></span>
<span><span class="co">## 12 1 0 4 1</span></span></code></pre>
<p>For instance, no individual is seen on the camera A on the first
timestep, one individual is seen on the camera A on the second timestep,
three individuals are seen on the camera A on the third time step
<em>etc.</em></p>
<p><br></p>
<p>We can now call the package and apply the
<code>SmaxN.computation</code> function to compute the
<code>SmaxN</code> metric among other metrics:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span> <span class="op">&lt;-</span> <span class="fu">SmaxN</span><span class="fu">::</span><span class="fu"><a href="../reference/SmaxN.computation.html">SmaxN.computation</a></span><span class="op">(</span>abund_df <span class="op">=</span> <span class="va">abund_df_ex</span>, </span>
<span>                                          speed <span class="op">=</span> <span class="fl">1.6</span>, </span>
<span>                                          dist_df <span class="op">=</span> <span class="va">dist_df_ex</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "!!!!!! Starting row  1 on 2"</span></span>
<span><span class="co">## [1] "50%"</span></span></code></pre>
<p><br></p>
<p>Let’s now have a look at the results:</p>
<ul>
<li>the <code>maxN</code> value which is the highest abundance seen amon
all cameras and time steps:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">maxN</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 7</span></span></code></pre>
<ul>
<li>the <code>SmaxN</code> value: we can see here that by using the
<code>SmaxN</code> metric, the abundance estmation is more than doubled
than when using the <code>maxN</code> metric</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">SmaxN</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 19</span></span></code></pre>
<ul>
<li>the values of abundances along cameras and time steps which have led
to the <code>SmaxN</code> metric:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">path_saved</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## [[1]][[1]]</span></span>
<span><span class="co">##   value cam_nm timestep</span></span>
<span><span class="co">## 1     7      A        4</span></span>
<span><span class="co">## 2     2      B        4</span></span>
<span><span class="co">## 3     4      C        6</span></span>
<span><span class="co">## 4     6      D        6</span></span></code></pre>
<ul>
<li>the number of combinaisons of time steps and cameras which have led
to the <code>SmaxN</code> value:</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">number_SmaxN_path</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1</span></span></code></pre>
<ul>
<li>the <code>SmaxN_timestep</code> which is the maximal value of the
sum of abundances across all cameras for each time step: Here this
metrix equals 16 which is obtained through the ninth time step (6 + 1 +
3 + 6):</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">SmaxN_timestep</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 16</span></span></code></pre>
<ul>
<li>the maximal values obtained for each camera across all time
steps:</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">maxN_cam</span></span></code></pre></div>
<pre><code><span><span class="co">## A B C D </span></span>
<span><span class="co">## 7 2 4 6</span></span></code></pre>
<ul>
<li>the maximal values obtained for each time step across all
cameras:</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SmaxN_results</span><span class="op">$</span><span class="va">maxN_timestep</span></span></code></pre></div>
<pre><code><span><span class="co">##  1  2  3  4  5  6  7  8  9 10 11 12 </span></span>
<span><span class="co">##  2  2  3  7  2  6  3  2  6  4  2  4</span></span></code></pre>
<p><br></p>
<p>For further explanations, see the paper associated with this
framework: <a href="https://aslopubs.onlinelibrary.wiley.com/doi/full/10.1002/lom3.10606" class="external-link uri">https://aslopubs.onlinelibrary.wiley.com/doi/full/10.1002/lom3.10606</a></p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p><br></p>
<ul>
<li><p>Alexander <em>et al.</em> (1977) Fast locomotion of some African
ungulates <em>Journal of Zoology</em>, <strong>183</strong>,
291-300.</p></li>
<li><p>Fulton (2007) Swimming speed performance in coral reef fishes:
field validations reveal distinct functional groups <em>Coral
Reefs</em>, <strong>26</strong>, 217-228.</p></li>
<li><p>Hirt <em>et al.</em> (2017) A general scaling law reveals why the
largest animals are not the fastest <em>Nat. Ecol. Evol.</em>
<strong>1</strong>, 1116–1122.</p></li>
<li><p>Husak <em>et al.</em> (2006) Faster lizards sire more offspring:
sexual selection on whole-animal performance <em>Evolution</em>
<strong>60</strong>, 2122–2130.</p></li>
<li><p>Layne &amp; Benton (1954) Some Speeds of Small Mammals
<em>Journal of Mammology</em> <strong>1</strong>, 103–104.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Camille Magneville.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
